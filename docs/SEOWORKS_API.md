# SEO Werks Integration API\n\nThis API allows **SEO Werks** to update task completion status and deliverables, which will automatically appear in the dealership's \"Orders\" dashboard.\n\n## Overview\n\nThe SEO Werks API provides endpoints for:\n- **Task Completion Updates** - Mark tasks as completed with deliverables\n- **Status Management** - Update task status throughout the workflow\n- **Bulk Operations** - Update multiple tasks efficiently\n- **Status Queries** - Get current task status for tracking\n\n## Authentication\n\nAll SEO Werks API endpoints require authentication via API key:\n\n```bash\n# Option 1: X-API-Key header\ncurl -H \"X-API-Key: your-seoworks-api-key\" \\\n  https://api.rylie-seo.com/api/seoworks/health\n\n# Option 2: Authorization Bearer token\ncurl -H \"Authorization: Bearer your-seoworks-api-key\" \\\n  https://api.rylie-seo.com/api/seoworks/health\n```\n\n**Environment Variable:** `SEOWORKS_API_KEY=your-secure-api-key`\n\n## Task Types\n\nThe system supports 5 task types that map to the \"Orders\" dashboard sections:\n\n| Task Type | Description | Typical Deliverables |\n|-----------|-------------|-----------------------|\n| `blog` | Blog post creation and optimization | Blog posts |\n| `page` | Website page content creation | Page content, technical SEO |\n| `gbp` | Google Business Profile optimization | GBP optimization reports |\n| `maintenance` | Website maintenance and updates | Maintenance reports |\n| `seo` | SEO audit, strategy, and optimization | SEO audits, keyword strategies |\n\n## API Endpoints\n\n### 1. Complete Task\n**POST** `/api/seoworks/tasks/complete`\n\nMarks a task as completed with deliverables.\n\n**Request Body:**\n```json\n{\n  \"requestId\": \"uuid-of-the-request\",\n  \"status\": \"completed\",\n  \"deliverables\": [\n    {\n      \"type\": \"blog_post\",\n      \"title\": \"10 Tips for Car Maintenance in Winter\",\n      \"description\": \"SEO-optimized blog post targeting winter car care keywords\",\n      \"fileUrl\": \"https://files.seoworks.com/deliverables/blog-post-123.pdf\",\n      \"completedAt\": \"2025-06-10T14:30:00Z\",\n      \"metadata\": {\n        \"wordCount\": 1200,\n        \"targetKeywords\": [\"winter car maintenance\", \"car care tips\"],\n        \"seoScore\": 95\n      }\n    }\n  ],\n  \"completionNotes\": \"Blog post optimized for target keywords and includes engaging visuals\",\n  \"actualHours\": 4.5,\n  \"qualityScore\": 5,\n  \"clientFeedbackRequired\": false,\n  \"nextSteps\": [\n    \"Schedule social media promotion\",\n    \"Monitor keyword rankings\"\n  ]\n}\n```\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"requestId\": \"uuid-of-the-request\",\n  \"previousStatus\": \"in_progress\",\n  \"newStatus\": \"completed\",\n  \"updatedAt\": \"2025-06-10T14:30:00Z\",\n  \"request\": {\n    \"id\": \"uuid-of-the-request\",\n    \"type\": \"blog\",\n    \"title\": \"Winter Car Maintenance Blog Post\",\n    \"status\": \"completed\",\n    \"completedAt\": \"2025-06-10T14:30:00Z\",\n    \"deliverables\": [...],\n    \"clientInfo\": {\n      \"tenantName\": \"Downtown Toyota\",\n      \"clientName\": \"John Smith\"\n    }\n  },\n  \"nextSteps\": [\n    \"Schedule social media promotion\",\n    \"Monitor keyword rankings\"\n  ]\n}\n```\n\n### 2. Update Task Status\n**POST** `/api/seoworks/tasks/complete`\n\nUpdate task status during workflow (same endpoint, different status values).\n\n**Valid Status Transitions:**\n- `pending` → `assigned`, `cancelled`\n- `assigned` → `in_progress`, `cancelled`\n- `in_progress` → `review`, `completed`, `cancelled`\n- `review` → `completed`, `in_progress`\n\n**Example - Mark as In Progress:**\n```json\n{\n  \"requestId\": \"uuid-of-the-request\",\n  \"status\": \"in_progress\",\n  \"completionNotes\": \"Started keyword research and content outline\",\n  \"actualHours\": 1.0\n}\n```\n\n### 3. Bulk Update Tasks\n**POST** `/api/seoworks/tasks/bulk-update`\n\nUpdate multiple tasks in a single request (max 50 tasks).\n\n**Request Body:**\n```json\n{\n  \"updates\": [\n    {\n      \"requestId\": \"uuid-1\",\n      \"status\": \"completed\",\n      \"deliverables\": [...],\n      \"actualHours\": 4.5\n    },\n    {\n      \"requestId\": \"uuid-2\", \n      \"status\": \"in_progress\",\n      \"actualHours\": 2.0\n    }\n  ]\n}\n```\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"processed\": 2,\n  \"successful\": 2,\n  \"failed\": 0,\n  \"results\": [\n    {\n      \"requestId\": \"uuid-1\",\n      \"status\": \"updated\",\n      \"newStatus\": \"completed\"\n    },\n    {\n      \"requestId\": \"uuid-2\",\n      \"status\": \"updated\", \n      \"newStatus\": \"in_progress\"\n    }\n  ]\n}\n```\n\n### 4. Get Task Status\n**GET** `/api/seoworks/tasks/status`\n\nRetrieve current status of tasks for tracking.\n\n**Query Parameters:**\n- `requestIds` - Array of request UUIDs\n- `tenantId` - Filter by tenant\n- `status` - Filter by status\n- `type` - Filter by task type\n- `limit` - Results per page (default: 50, max: 100)\n- `offset` - Pagination offset (default: 0)\n\n**Example:**\n```bash\nGET /api/seoworks/tasks/status?status=in_progress&type=blog&limit=10\n```\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"tasks\": [\n    {\n      \"id\": \"uuid-of-request\",\n      \"type\": \"blog\",\n      \"title\": \"Summer Car Care Tips\",\n      \"status\": \"in_progress\",\n      \"priority\": \"medium\",\n      \"estimatedHours\": 4,\n      \"actualHours\": 2,\n      \"deadline\": \"2025-06-15T00:00:00Z\",\n      \"createdAt\": \"2025-06-01T09:00:00Z\",\n      \"deliverables\": [],\n      \"tenant\": {\n        \"id\": \"tenant-uuid\",\n        \"name\": \"Downtown Toyota\"\n      },\n      \"client\": {\n        \"id\": \"client-uuid\",\n        \"name\": \"John Smith\",\n        \"email\": \"john@downtowntoyota.com\"\n      }\n    }\n  ],\n  \"pagination\": {\n    \"limit\": 10,\n    \"offset\": 0,\n    \"total\": 1,\n    \"hasMore\": false\n  }\n}\n```\n\n### 5. Get Task Types\n**GET** `/api/seoworks/tasks/types`\n\nRetrieve available task types and deliverable templates.\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"taskTypes\": {\n    \"blog\": {\n      \"name\": \"Blog Task\",\n      \"description\": \"Blog post creation and optimization\",\n      \"deliverableTypes\": [\"blog_post\"],\n      \"estimatedHours\": { \"min\": 2, \"max\": 8 },\n      \"typicalDeliverables\": [\n        { \"type\": \"blog_post\", \"title\": \"SEO-Optimized Blog Post\", \"required\": true }\n      ]\n    },\n    \"seo\": {\n      \"name\": \"SEO Task\",\n      \"description\": \"SEO audit, strategy, and optimization\",\n      \"deliverableTypes\": [\"seo_audit_report\", \"keyword_strategy\"],\n      \"estimatedHours\": { \"min\": 4, \"max\": 20 }\n    }\n  },\n  \"deliverableTypes\": {\n    \"seo_audit_report\": \"Comprehensive SEO audit with recommendations\",\n    \"blog_post\": \"SEO-optimized blog post content\",\n    \"page_content\": \"Website page content and optimization\"\n  }\n}\n```\n\n### 6. Health Check\n**GET** `/api/seoworks/health`\n\nVerify API connectivity and system status.\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"service\": \"SEO Werks Integration API\",\n  \"status\": \"operational\",\n  \"timestamp\": \"2025-06-10T14:30:00Z\",\n  \"database\": \"connected\",\n  \"endpoints\": {\n    \"taskCompletion\": \"/api/seoworks/tasks/complete\",\n    \"taskStatus\": \"/api/seoworks/tasks/status\"\n  },\n  \"version\": \"1.0.0\"\n}\n```\n\n## Deliverable Types\n\nSupported deliverable types for each task category:\n\n### Blog Tasks\n- `blog_post` - SEO-optimized blog post content\n\n### Page Tasks\n- `page_content` - Website page content and optimization\n- `technical_seo_checklist` - Technical SEO implementation checklist\n\n### GBP Tasks\n- `gbp_optimization` - Google Business Profile optimization report\n\n### Maintenance Tasks\n- `maintenance_report` - Website maintenance completion report\n- `technical_seo_checklist` - Technical SEO checklist\n\n### SEO Tasks\n- `seo_audit_report` - Comprehensive SEO audit with recommendations\n- `keyword_strategy` - Keyword research and strategy document\n- `technical_seo_checklist` - Technical SEO implementation guide\n\n## Error Handling\n\nThe API returns standard HTTP status codes:\n\n- `200` - Success\n- `400` - Bad Request (validation errors)\n- `401` - Unauthorized (invalid API key)\n- `404` - Not Found (request doesn't exist)\n- `500` - Internal Server Error\n\n**Error Response Format:**\n```json\n{\n  \"error\": \"Request not found\",\n  \"requestId\": \"uuid-that-failed\",\n  \"details\": \"Additional error information\"\n}\n```\n\n**Validation Error Example:**\n```json\n{\n  \"error\": \"Invalid request data\",\n  \"details\": [\n    {\n      \"field\": \"status\",\n      \"message\": \"Status must be: completed, in_progress, review, or cancelled\"\n    }\n  ]\n}\n```\n\n## Integration Examples\n\n### Complete a Blog Task\n```bash\ncurl -X POST https://api.rylie-seo.com/api/seoworks/tasks/complete \\\n  -H \"X-API-Key: your-api-key\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"requestId\": \"123e4567-e89b-12d3-a456-426614174000\",\n    \"status\": \"completed\",\n    \"deliverables\": [\n      {\n        \"type\": \"blog_post\",\n        \"title\": \"10 Essential Car Maintenance Tips for Winter\",\n        \"description\": \"Comprehensive guide targeting winter car care keywords\",\n        \"fileUrl\": \"https://files.seoworks.com/blog-winter-maintenance.pdf\",\n        \"metadata\": {\n          \"wordCount\": 1500,\n          \"targetKeywords\": [\"winter car maintenance\", \"car winterization\"],\n          \"seoScore\": 98\n        }\n      }\n    ],\n    \"completionNotes\": \"Blog post optimized for local search terms and includes seasonal keywords\",\n    \"actualHours\": 5.5,\n    \"qualityScore\": 5\n  }'\n```\n\n### Mark Task as In Progress\n```bash\ncurl -X POST https://api.rylie-seo.com/api/seoworks/tasks/complete \\\n  -H \"X-API-Key: your-api-key\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"requestId\": \"123e4567-e89b-12d3-a456-426614174000\",\n    \"status\": \"in_progress\",\n    \"completionNotes\": \"Keyword research completed, starting content creation\",\n    \"actualHours\": 1.5\n  }'\n```\n\n### Get Tasks for Tracking\n```bash\ncurl \"https://api.rylie-seo.com/api/seoworks/tasks/status?status=in_progress&limit=20\" \\\n  -H \"X-API-Key: your-api-key\"\n```\n\n## Impact on Orders Dashboard\n\nWhen SEO Werks updates a task:\n\n1. **Status Changes** - Immediately reflected in dealership dashboard\n2. **Deliverables Added** - Files and documents appear in \"Deliverables\" section\n3. **Progress Updates** - Completion notes visible to client\n4. **Audit Trail** - All changes logged for transparency\n5. **Notifications** - Client receives updates about task progress\n\n## Security & Compliance\n\n- **API Key Authentication** - Secure key-based access\n- **Request Validation** - All inputs validated and sanitized\n- **Audit Logging** - Complete trail of all API interactions\n- **Rate Limiting** - Protection against API abuse\n- **Data Isolation** - Tenant data completely separated\n\n## Testing\n\n### Test API Connectivity\n```bash\ncurl https://api.rylie-seo.com/api/seoworks/health \\\n  -H \"X-API-Key: your-api-key\"\n```\n\n### Validate Task Types\n```bash\ncurl https://api.rylie-seo.com/api/seoworks/tasks/types \\\n  -H \"X-API-Key: your-api-key\"\n```\n\nThis API provides SEO Werks with a seamless way to update task status and deliverables, ensuring the dealership's \"Orders\" dashboard always reflects the current state of their SEO work.