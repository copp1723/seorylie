# Server Configuration
NODE_ENV=development
PORT=3000
HOST=localhost
SESSION_SECRET=your_session_secret_here
CORS_ORIGIN=http://localhost:5173
API_BASE_URL=http://localhost:3000/api
FRONTEND_URL=http://localhost:5173

# Database Configuration
DATABASE_URL=postgres://postgres:password@localhost:5432/cleanrylie

# Database Connection Pool Configuration
# These settings control how the application manages database connections
DB_POOL_MAX_CONNECTIONS=20      # Maximum number of concurrent connections (higher = more throughput, but more server resources)
DB_POOL_IDLE_TIMEOUT_MS=30000   # How long connections can remain idle before being closed (30 seconds default)
# Properly tuned pool settings can significantly improve performance under load
# and prevent connection errors during traffic spikes

# Redis Configuration (optional)
# Set SKIP_REDIS=true to disable Redis dependency
REDIS_URL=redis://localhost:6379
SKIP_REDIS=false
REDIS_PREFIX=cleanrylie:

# Authentication
JWT_SECRET=your_jwt_secret_here
JWT_EXPIRY=24h
REFRESH_TOKEN_SECRET=your_refresh_token_secret_here
REFRESH_TOKEN_EXPIRY=7d

# Email Configuration
SENDGRID_API_KEY=your_sendgrid_api_key
EMAIL_FROM=noreply@example.com
EMAIL_REPLY_TO=support@example.com

# SendGrid Webhook Configuration (Migration)
SENDGRID_WEBHOOK_SECRET=your_webhook_verification_secret
SENDGRID_WEBHOOK_ENABLED=false
SENDGRID_VERIFICATION_ENABLED=true

# Email Migration Control
EMAIL_PROCESSOR=legacy
EMAIL_ROUTING_LOGGING=true
EMAIL_COMPARISON_MODE=false
LEGACY_EMAIL_ENABLED=true

# Per-dealership routing (JSON format)
# DEALERSHIP_EMAIL_ROUTING={"kunes-rv-fox-valley":"sendgrid","kunes-rv-freedom":"legacy"}

# SMS Configuration
TWILIO_ACCOUNT_SID=your_twilio_account_sid
TWILIO_AUTH_TOKEN=your_twilio_auth_token
TWILIO_PHONE_NUMBER=+15551234567

# OpenAI Configuration
OPENAI_API_KEY=your_openai_api_key
OPENAI_ORGANIZATION=your_openai_org_id

# =============================================================================
# FEATURE FLAGS
# =============================================================================
# ðŸŸ¡ OPTIONAL: Feature flag overrides (override individual flags via environment)
# Format: FEATURE_FLAG_NAME=true/false (e.g., FEATURE_JWT_REFRESH_ROTATION=true)
# FEATURE_AGENT_SQUAD_INTEGRATION=false
# FEATURE_REDIS_WEBSOCKET_SCALING=false
# FEATURE_TYPESCRIPT_STRICT_MODE=false

# =============================================================================
# LOGGING & MONITORING
# =============================================================================
# Log level (error, warn, info, debug)
LOG_LEVEL=info
ENABLE_REQUEST_LOGGING=true
SENTRY_DSN=your_sentry_dsn

# Feature Flags
ENABLE_AGENT_SQUAD=true
ENABLE_LEAD_MANAGEMENT=true
ENABLE_ANALYTICS_DASHBOARD=true
ENABLE_PERSONA_MANAGEMENT=true
ENABLE_CONVERSATION_LOGS=true
ENABLE_PROMPT_TESTING=true
ENABLE_ENHANCED_SECURITY=true
ENABLE_MULTI_TENANT=true

# Development Tools
ENABLE_API_DOCS=true
ENABLE_DEBUG_ENDPOINTS=true
